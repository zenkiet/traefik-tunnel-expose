@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

/* Theme variants (Tailwind v4) */
@custom-variant dark (&:where(html:not([data-theme='light']) &, html[data-theme='dark'] &));
@custom-variant light (&:where(html[data-theme='light'] &));

/* ===== Tokens ===== */
:root {
	color-scheme: dark;

	--page-bg:
		radial-gradient(circle at 15% 20%, rgba(99, 102, 241, 0.12), transparent 32%),
		radial-gradient(circle at 80% 0%, rgba(14, 165, 233, 0.16), transparent 28%), #0b1021;

	--card: rgba(255, 255, 255, 0.04);
	--border: rgba(255, 255, 255, 0.08);

	--text: #e5ecf5; /* default text */
	--muted: #94a3b8; /* secondary text */
	--accent: #60a5fa; /* primary / brand */
	--destructive: #f87171; /* destructive actions */
}

html[data-theme='light'] {
	color-scheme: light;

	--page-bg:
		radial-gradient(circle at 20% 18%, rgba(59, 130, 246, 0.16), transparent 32%),
		radial-gradient(circle at 78% 4%, rgba(14, 165, 233, 0.18), transparent 30%), #f8fafc;

	--card: rgba(255, 255, 255, 0.86);
	--border: rgba(15, 23, 42, 0.12);

	--text: #0f172a;
	--muted: #475569;
	--accent: #2563eb;
	--destructive: #ef4444;
}

/* ===== Base ===== */
@layer base {
	html {
		font-family:
			'Inter',
			system-ui,
			-apple-system,
			BlinkMacSystemFont,
			'Segoe UI',
			sans-serif;
		color: var(--text); /* ensure default text = --text */
	}

	body {
		@apply m-0 min-h-screen antialiased;
		background: var(--page-bg);
		color: var(--text); /* default text = --text */
		transition:
			background 220ms ease,
			color 220ms ease;
	}

	a {
		@apply no-underline;
		color: inherit;
	}

	code {
		font-family:
			'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
			'Courier New', monospace;
	}
}

/* ===== Components ===== */
@layer components {
	.glass {
		@apply shadow-xs backdrop-blur-md backdrop-saturate-150;
		background: var(--card);
		border: 1px solid var(--border);
		color: var(--text);
		transition:
			background 180ms ease,
			border-color 180ms ease,
			box-shadow 180ms ease;
	}

	.input {
		@apply form-input w-full rounded-xl px-3 py-2 text-sm transition outline-none;
		border: 1px solid color-mix(in oklab, var(--border) 85%, transparent);
		background: color-mix(in oklab, var(--card) 75%, transparent);
		color: var(--text);
	}

	.input:focus {
		border-color: color-mix(in oklab, var(--accent) 70%, var(--border));
		background: color-mix(in oklab, var(--card) 90%, transparent);
	}

	.pill {
		@apply rounded-full px-3 py-1 text-xs font-semibold;
		background: rgba(255, 255, 255, 0.06);
		color: color-mix(in oklab, var(--text) 85%, var(--muted));
		transition:
			background 180ms ease,
			color 180ms ease;
	}

	.badge {
		@apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-semibold;
		background: color-mix(in oklab, var(--accent) 18%, transparent);
		color: color-mix(in oklab, var(--text) 90%, var(--accent));
	}
}

/* ===== Utilities (token-based) ===== */
@layer utilities {
	/* token utilities */
	.border {
		border-color: var(--border);
	}
	.text-primary {
		color: var(--accent);
	}
	.text-muted {
		color: var(--muted);
	}
	.bg-card {
		background: var(--card);
	}
	.border-card {
		border-color: var(--border);
	}
	.bg-glass {
		background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));

		&:hover {
			background: linear-gradient(180deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
		}

		&:active {
			background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01));
		}
	}

	.scrollable {
		@apply overflow-y-auto;
		scrollbar-width: thin;
		scrollbar-color: rgba(148, 163, 184, 0.6) transparent;
	}
	.scrollable::-webkit-scrollbar {
		width: 6px;
	}
	.scrollable::-webkit-scrollbar-thumb {
		background: rgba(148, 163, 184, 0.6);
		border-radius: 9999px;
	}

	@keyframes fadeWave {
		0%,
		100% {
			opacity: 0.2;
		}
		50% {
			opacity: 1;
		}
	}
}
